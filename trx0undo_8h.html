<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InnoDB Plugin: include/trx0undo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">InnoDB Plugin
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trx0undo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="univ_8i.html">univ.i</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="page0types_8h_source.html">page0types.h</a>&quot;</code><br/>
<code>#include &quot;trx0xa.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0undo_8ic.html">trx0undo.ic</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for trx0undo.h:</div>
<div class="dyncontent">
<div class="center"><img src="trx0undo_8h__incl.png" border="0" usemap="#include_2trx0undo_8h" alt=""/></div>
<map name="include_2trx0undo_8h" id="include_2trx0undo_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="trx0undo_8h__dep__incl.png" border="0" usemap="#include_2trx0undo_8hdep" alt=""/></div>
<map name="include_2trx0undo_8hdep" id="include_2trx0undo_8hdep">
</map>
</div>
</div>
<p><a href="trx0undo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a84f83daf1e089d2b97861cedfaf18ebb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a84f83daf1e089d2b97861cedfaf18ebb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>trx_undo_free_last_page</b>(trx, undo, mtr)&#160;&#160;&#160;<a class="el" href="trx0undo_8h.html#a9dbaccaf04096907406233fdab0997e7">trx_undo_free_last_page_func</a>(trx,undo,mtr)</td></tr>
<tr class="memitem:a35e400616ed7fad9e013a366c9285bd0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35e400616ed7fad9e013a366c9285bd0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>trx_undo_truncate_end</b>(trx, undo, limit)&#160;&#160;&#160;<a class="el" href="trx0undo_8h.html#a0b5b608178d72790337076e4db0ab6b1">trx_undo_truncate_end_func</a>(trx,undo,limit)</td></tr>
<tr class="memitem:a1bf638ea4eb0c03cc4ae3df50af3dbcd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1bf638ea4eb0c03cc4ae3df50af3dbcd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_INSERT</b>&#160;&#160;&#160;1	/* contains undo entries for inserts */</td></tr>
<tr class="memitem:a690ce47aca0d2f09063384c8b50a2f43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_UPDATE</b></td></tr>
<tr class="memitem:a836092df0b82917a8ff0fc9570ee515a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_ACTIVE</b></td></tr>
<tr class="memitem:a9acec71cf2def1abe4f3ab2b110dc4ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9acec71cf2def1abe4f3ab2b110dc4ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_CACHED</b>&#160;&#160;&#160;2	/* cached for quick reuse */</td></tr>
<tr class="memitem:a0e83df7aa1685c6ba3118bae30cf688e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e83df7aa1685c6ba3118bae30cf688e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_TO_FREE</b>&#160;&#160;&#160;3	/* insert undo segment can be freed */</td></tr>
<tr class="memitem:a3cb915c175c75cf318cfa7a8a1a2ad5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_TO_PURGE</b></td></tr>
<tr class="memitem:a6e14b9b7912ad2052aee60e138571454"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_PREPARED</b></td></tr>
<tr class="memitem:ab91980ce604cd0800f205cb4b2508cc6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ab91980ce604cd0800f205cb4b2508cc6">TRX_UNDO_PAGE_HDR</a>&#160;&#160;&#160;FSEG_PAGE_DATA</td></tr>
<tr class="memitem:a7f68b6afdd7d85380279245d3fab531c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a7f68b6afdd7d85380279245d3fab531c">TRX_UNDO_PAGE_REUSE_LIMIT</a>&#160;&#160;&#160;(3 * <a class="el" href="univ_8i.html#a43a8a62f5267962c41fa964d0b3aecae">UNIV_PAGE_SIZE</a> / 4)</td></tr>
<tr class="memitem:a7080a21a75110243d8b9c1a43c442085"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a7080a21a75110243d8b9c1a43c442085">TRX_UNDO_SEG_HDR</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#ab91980ce604cd0800f205cb4b2508cc6">TRX_UNDO_PAGE_HDR</a> + <a class="el" href="trx0undo_8h.html#a81f0cffd9e576d90308dcde3aa9a7098">TRX_UNDO_PAGE_HDR_SIZE</a>)</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a304a793a3cc253b520910aa34547da96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a304a793a3cc253b520910aa34547da96">TRX_UNDO_PAGE_TYPE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:a602caf71da94134c9529c3a05bd56776"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a602caf71da94134c9529c3a05bd56776">TRX_UNDO_PAGE_START</a>&#160;&#160;&#160;2</td></tr>
<tr class="memitem:a5fb4e65d422c3cd4cd73d6e37e60b8ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a5fb4e65d422c3cd4cd73d6e37e60b8ce">TRX_UNDO_PAGE_FREE</a>&#160;&#160;&#160;4</td></tr>
<tr class="memitem:ab9f7746023b72bd8aec2a3661f88f42b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ab9f7746023b72bd8aec2a3661f88f42b">TRX_UNDO_PAGE_NODE</a>&#160;&#160;&#160;6</td></tr>
<tr class="memitem:a81f0cffd9e576d90308dcde3aa9a7098"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a81f0cffd9e576d90308dcde3aa9a7098">TRX_UNDO_PAGE_HDR_SIZE</a>&#160;&#160;&#160;(6 + FLST_NODE_SIZE)</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a363a78c092573b7b84181c2c95480da6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a363a78c092573b7b84181c2c95480da6">TRX_UNDO_STATE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:afc1b18c4418c42c02071eb629d202c71"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#afc1b18c4418c42c02071eb629d202c71">TRX_UNDO_LAST_LOG</a>&#160;&#160;&#160;2</td></tr>
<tr class="memitem:aef35459c9c8dc977e3f7cc1091ccc6a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#aef35459c9c8dc977e3f7cc1091ccc6a6">TRX_UNDO_FSEG_HEADER</a>&#160;&#160;&#160;4</td></tr>
<tr class="memitem:a8c332908af74a82f679a3ca31544a69b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a8c332908af74a82f679a3ca31544a69b">TRX_UNDO_PAGE_LIST</a>&#160;&#160;&#160;(4 + FSEG_HEADER_SIZE)</td></tr>
<tr class="memitem:a1f2cdc055cdda13b163edd2e8e26f505"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a1f2cdc055cdda13b163edd2e8e26f505">TRX_UNDO_SEG_HDR_SIZE</a>&#160;&#160;&#160;(4 + FSEG_HEADER_SIZE + FLST_BASE_NODE_SIZE)</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:ad731492924e06471984f99d5f59d59a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ad731492924e06471984f99d5f59d59a8">TRX_UNDO_TRX_ID</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:a719b18197bfb01c0292995506538f445"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a719b18197bfb01c0292995506538f445">TRX_UNDO_TRX_NO</a>&#160;&#160;&#160;8</td></tr>
<tr class="memitem:a6b0e667037fdd3dee1b299a455a233aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a6b0e667037fdd3dee1b299a455a233aa">TRX_UNDO_DEL_MARKS</a>&#160;&#160;&#160;16</td></tr>
<tr class="memitem:ad3093a267fe72ea95329bab4130d50e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ad3093a267fe72ea95329bab4130d50e8">TRX_UNDO_LOG_START</a>&#160;&#160;&#160;18</td></tr>
<tr class="memitem:a84cc5b863aaf13474c2a67f55d45bf19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a84cc5b863aaf13474c2a67f55d45bf19">TRX_UNDO_XID_EXISTS</a>&#160;&#160;&#160;20</td></tr>
<tr class="memitem:aff82d1140d6d6e2f9cf0bbb00bf0500e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#aff82d1140d6d6e2f9cf0bbb00bf0500e">TRX_UNDO_DICT_TRANS</a>&#160;&#160;&#160;21</td></tr>
<tr class="memitem:a52ac1fb2fe68ae017021f0a7cde9b892"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a52ac1fb2fe68ae017021f0a7cde9b892">TRX_UNDO_TABLE_ID</a>&#160;&#160;&#160;22</td></tr>
<tr class="memitem:ae028eab2bea87c744818f15e312e51f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ae028eab2bea87c744818f15e312e51f9">TRX_UNDO_NEXT_LOG</a>&#160;&#160;&#160;30</td></tr>
<tr class="memitem:af46da26879663fa2a46a5a8a0e23cae4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#af46da26879663fa2a46a5a8a0e23cae4">TRX_UNDO_PREV_LOG</a>&#160;&#160;&#160;32</td></tr>
<tr class="memitem:abda919ac9fd0edefd4dfac71098ba3ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#abda919ac9fd0edefd4dfac71098ba3ad">TRX_UNDO_HISTORY_NODE</a>&#160;&#160;&#160;34</td></tr>
<tr class="memitem:a1102a9f4843a83f67018860e0bcf5b20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a1102a9f4843a83f67018860e0bcf5b20">TRX_UNDO_LOG_OLD_HDR_SIZE</a>&#160;&#160;&#160;(34 + FLST_NODE_SIZE)</td></tr>
<tr class="memitem:ada98715799eab7dea1f55e0e3aaadce5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ada98715799eab7dea1f55e0e3aaadce5">TRX_UNDO_XA_FORMAT</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#a1102a9f4843a83f67018860e0bcf5b20">TRX_UNDO_LOG_OLD_HDR_SIZE</a>)</td></tr>
<tr class="memitem:aa4053dcba228d4d5370f91492452c2a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#aa4053dcba228d4d5370f91492452c2a0">TRX_UNDO_XA_TRID_LEN</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#ada98715799eab7dea1f55e0e3aaadce5">TRX_UNDO_XA_FORMAT</a> + 4)</td></tr>
<tr class="memitem:a6c9fc1de411ca05342b48353860ff824"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a6c9fc1de411ca05342b48353860ff824">TRX_UNDO_XA_BQUAL_LEN</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#aa4053dcba228d4d5370f91492452c2a0">TRX_UNDO_XA_TRID_LEN</a> + 4)</td></tr>
<tr class="memitem:abc4f59f064e7b22a2ddc421df893d021"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#abc4f59f064e7b22a2ddc421df893d021">TRX_UNDO_XA_XID</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#a6c9fc1de411ca05342b48353860ff824">TRX_UNDO_XA_BQUAL_LEN</a> + 4)</td></tr>
<tr class="memitem:ace2d2f23a85f9ec9ab7cb9df670242f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ace2d2f23a85f9ec9ab7cb9df670242f8">TRX_UNDO_LOG_XA_HDR_SIZE</a>&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#abc4f59f064e7b22a2ddc421df893d021">TRX_UNDO_XA_XID</a> + XIDDATASIZE)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75d19c81c579ac7bde1e4eb444467dc6"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a75d19c81c579ac7bde1e4eb444467dc6">trx_undo_build_roll_ptr</a> (<a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> is_insert, ulint rseg_id, ulint page_no, ulint offset)</td></tr>
<tr class="memitem:a99999bd86937196c9e3474c75a756e06"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a99999bd86937196c9e3474c75a756e06">trx_undo_decode_roll_ptr</a> (<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> *is_insert, ulint *rseg_id, ulint *page_no, ulint *offset)</td></tr>
<tr class="memitem:a07f8a1930550c8e69e70cea94428aa59"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a07f8a1930550c8e69e70cea94428aa59">trx_undo_roll_ptr_is_insert</a> (<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr)</td></tr>
<tr class="memitem:a86a2f48a054e0f266464bbb8ba25ac2e"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a86a2f48a054e0f266464bbb8ba25ac2e">trx_undo_trx_id_is_insert</a> (const byte *trx_id))</td></tr>
<tr class="memitem:a217d801284210e8ce80b23e6caf1f7e1"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a217d801284210e8ce80b23e6caf1f7e1">trx_write_roll_ptr</a> (byte *ptr, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr)</td></tr>
<tr class="memitem:a0310ed42747e8c3e3ab2158aab3857d7"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a0310ed42747e8c3e3ab2158aab3857d7">trx_read_roll_ptr</a> (const byte *ptr)</td></tr>
<tr class="memitem:a91c468bb2123f0e65c01a1c6dd773ed6"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a91c468bb2123f0e65c01a1c6dd773ed6">trx_undo_page_get</a> (ulint space, ulint zip_size, ulint page_no, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a14227732ee44962b7deb045d3f4f05c7"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a14227732ee44962b7deb045d3f4f05c7">trx_undo_page_get_s_latched</a> (ulint space, ulint zip_size, ulint page_no, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:ac85d1faa279ebe0025f6d2a6d4643b12"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ac85d1faa279ebe0025f6d2a6d4643b12">trx_undo_page_get_prev_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, ulint page_no, ulint offset)</td></tr>
<tr class="memitem:a947c52d195d7ee1a60718354e18cc08b"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a947c52d195d7ee1a60718354e18cc08b">trx_undo_page_get_next_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, ulint page_no, ulint offset)</td></tr>
<tr class="memitem:ace4052df57f1530cd8ddf3b88e5c4b02"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ace4052df57f1530cd8ddf3b88e5c4b02">trx_undo_page_get_last_rec</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, ulint page_no, ulint offset)</td></tr>
<tr class="memitem:acec472401b15a890533d83013e03eb18"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#acec472401b15a890533d83013e03eb18">trx_undo_page_get_first_rec</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, ulint page_no, ulint offset)</td></tr>
<tr class="memitem:a401e2a2547a1e86a57165fabba15ced7"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a401e2a2547a1e86a57165fabba15ced7">trx_undo_get_prev_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, ulint page_no, ulint offset, bool shared, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a6843a910c265943c2f5a0c050d7ea0e1"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a6843a910c265943c2f5a0c050d7ea0e1">trx_undo_get_next_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, ulint page_no, ulint offset, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a1c5381a831e5dbb1b304098975be23bd"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a1c5381a831e5dbb1b304098975be23bd">trx_undo_get_first_rec</a> (ulint space, ulint zip_size, ulint page_no, ulint offset, ulint mode, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a1bc5b098f043369f7cd5482fcb202662"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a1bc5b098f043369f7cd5482fcb202662">trx_undo_add_page</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr))</td></tr>
<tr class="memitem:a9dbaccaf04096907406233fdab0997e7"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a9dbaccaf04096907406233fdab0997e7">trx_undo_free_last_page_func</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr))</td></tr>
<tr class="memitem:a0b5b608178d72790337076e4db0ab6b1"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a0b5b608178d72790337076e4db0ab6b1">trx_undo_truncate_end_func</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit))</td></tr>
<tr class="memitem:a9c96ff3ced71317156fc9cbfa0255054"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a9c96ff3ced71317156fc9cbfa0255054">trx_undo_truncate_start</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ulint space, ulint hdr_page_no, ulint hdr_offset, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit)</td></tr>
<tr class="memitem:aa5e2fe0371635fbb23dad87a258164a4"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#aa5e2fe0371635fbb23dad87a258164a4">trx_undo_lists_init</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg)</td></tr>
<tr class="memitem:a43891374222064f5466d9658b202311a"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a43891374222064f5466d9658b202311a">trx_undo_assign_undo</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, ulint type))</td></tr>
<tr class="memitem:a0390b8ccd9623edba3655f4a8875e225"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a0390b8ccd9623edba3655f4a8875e225">trx_undo_set_state_at_finish</a> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a3a731b5d0da0343f4f42d5b60ae0c8ca"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a3a731b5d0da0343f4f42d5b60ae0c8ca">trx_undo_set_state_at_prepare</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a204e5f56556f703e62e29c393f74e4e6"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a204e5f56556f703e62e29c393f74e4e6">trx_undo_update_cleanup</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a5cf5458624c75a3b5d0aa246bf2fe3a0"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#a5cf5458624c75a3b5d0aa246bf2fe3a0">trx_undo_insert_cleanup</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memitem:adacb180235b76ef4f62e51ff1ae7c0eb"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#adacb180235b76ef4f62e51ff1ae7c0eb">trx_undo_free_prepared</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx) UNIV_COLD)</td></tr>
<tr class="memitem:aac375f4379a6069f3f8f2ef03e93cbdd"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#aac375f4379a6069f3f8f2ef03e93cbdd">trx_undo_parse_page_init</a> (byte *ptr, byte *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:ad84a0a4d5fcac22c5ab826ebabcf625c"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ad84a0a4d5fcac22c5ab826ebabcf625c">trx_undo_parse_page_header</a> (ulint type, byte *ptr, byte *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:ae4709ff04567aaad2c3fd851c2ff4040"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8h.html#ae4709ff04567aaad2c3fd851c2ff4040">trx_undo_parse_discard_latest</a> (byte *ptr, byte *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a9396f5324a5d20f407ab4f65f4d1a3b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9396f5324a5d20f407ab4f65f4d1a3b7"></a>
UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><b>trx_undo_mem_free</b> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Transaction undo log</p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a836092df0b82917a8ff0fc9570ee515a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_ACTIVE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">1       <span class="comment">/* contains an undo log of an active</span></div>
<div class="line"><span class="comment">                                        transaction */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b0e667037fdd3dee1b299a455a233aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_DEL_MARKS&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined only in an update undo log: TRUE if the transaction may have done delete markings of records, and thus purge is necessary </p>

</div>
</div>
<a class="anchor" id="aff82d1140d6d6e2f9cf0bbb00bf0500e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_DICT_TRANS&#160;&#160;&#160;21</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TRUE if the transaction is a table create, index create, or drop transaction: in recovery the transaction cannot be rolled back in the usual way: a 'rollback' rather means dropping the created or dropped table, if it still exists </p>

</div>
</div>
<a class="anchor" id="aef35459c9c8dc977e3f7cc1091ccc6a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_FSEG_HEADER&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Header for the file segment which the undo log segment occupies </p>

</div>
</div>
<a class="anchor" id="abda919ac9fd0edefd4dfac71098ba3ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_HISTORY_NODE&#160;&#160;&#160;34</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the log is put to the history list, the file list node is here </p>

</div>
</div>
<a class="anchor" id="afc1b18c4418c42c02071eb629d202c71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_LAST_LOG&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset of the last undo log header on the segment header page, 0 if none </p>

</div>
</div>
<a class="anchor" id="a1102a9f4843a83f67018860e0bcf5b20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_LOG_OLD_HDR_SIZE&#160;&#160;&#160;(34 + FLST_NODE_SIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the undo log header without XID information </p>

</div>
</div>
<a class="anchor" id="ad3093a267fe72ea95329bab4130d50e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_LOG_START&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset of the first undo log record of this log on the header page; purge may remove undo log record from the log start, and therefore this is not necessarily the same as this log header end offset </p>

</div>
</div>
<a class="anchor" id="ace2d2f23a85f9ec9ab7cb9df670242f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_LOG_XA_HDR_SIZE&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#abc4f59f064e7b22a2ddc421df893d021">TRX_UNDO_XA_XID</a> + XIDDATASIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Total size of the undo log header with the XA XID </p>

</div>
</div>
<a class="anchor" id="ae028eab2bea87c744818f15e312e51f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_NEXT_LOG&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset of the next undo log header on this page, 0 if none </p>

</div>
</div>
<a class="anchor" id="a5fb4e65d422c3cd4cd73d6e37e60b8ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_FREE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>On each page of the undo log this field contains the byte offset of the first free byte on the page </p>

</div>
</div>
<a class="anchor" id="ab91980ce604cd0800f205cb4b2508cc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_HDR&#160;&#160;&#160;FSEG_PAGE_DATA</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The offset of the undo log page header on pages of the undo log </p>

</div>
</div>
<a class="anchor" id="a81f0cffd9e576d90308dcde3aa9a7098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_HDR_SIZE&#160;&#160;&#160;(6 + FLST_NODE_SIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the transaction undo log page header, in bytes </p>

</div>
</div>
<a class="anchor" id="a8c332908af74a82f679a3ca31544a69b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_LIST&#160;&#160;&#160;(4 + FSEG_HEADER_SIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Base node for the list of pages in the undo log segment; defined only on the undo log segment's first page </p>

</div>
</div>
<a class="anchor" id="ab9f7746023b72bd8aec2a3661f88f42b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_NODE&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The file list node in the chain of undo log pages </p>

</div>
</div>
<a class="anchor" id="a7f68b6afdd7d85380279245d3fab531c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_REUSE_LIMIT&#160;&#160;&#160;(3 * <a class="el" href="univ_8i.html#a43a8a62f5267962c41fa964d0b3aecae">UNIV_PAGE_SIZE</a> / 4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">An update undo segment with just one page can be reused if it has
</pre><p> at most this many bytes used; we must leave space at least for one new undo log header on the page </p>

</div>
</div>
<a class="anchor" id="a602caf71da94134c9529c3a05bd56776"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_START&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Byte offset where the undo log records for the LATEST transaction start on this page (remember that in an update undo log, the first page can contain several undo logs) </p>

</div>
</div>
<a class="anchor" id="a304a793a3cc253b520910aa34547da96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PAGE_TYPE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transaction undo log page header offsets TRX_UNDO_INSERT or TRX_UNDO_UPDATE </p>

</div>
</div>
<a class="anchor" id="a6e14b9b7912ad2052aee60e138571454"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PREPARED</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">5       <span class="comment">/* contains an undo log of an</span></div>
<div class="line"><span class="comment">                                        prepared transaction */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af46da26879663fa2a46a5a8a0e23cae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PREV_LOG&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset of the previous undo log header on this page, 0 if none </p>

</div>
</div>
<a class="anchor" id="a7080a21a75110243d8b9c1a43c442085"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_SEG_HDR&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#ab91980ce604cd0800f205cb4b2508cc6">TRX_UNDO_PAGE_HDR</a> + <a class="el" href="trx0undo_8h.html#a81f0cffd9e576d90308dcde3aa9a7098">TRX_UNDO_PAGE_HDR_SIZE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The offset of the undo log segment header on the first page of the undo
</pre><p> log segment </p>

</div>
</div>
<a class="anchor" id="a1f2cdc055cdda13b163edd2e8e26f505"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_SEG_HDR_SIZE&#160;&#160;&#160;(4 + FSEG_HEADER_SIZE + FLST_BASE_NODE_SIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the undo log segment header </p>

</div>
</div>
<a class="anchor" id="a363a78c092573b7b84181c2c95480da6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_STATE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undo log segment header TRX_UNDO_ACTIVE, ... </p>

</div>
</div>
<a class="anchor" id="a52ac1fb2fe68ae017021f0a7cde9b892"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_TABLE_ID&#160;&#160;&#160;22</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Id of the table if the preceding field is TRUE </p>

</div>
</div>
<a class="anchor" id="a3cb915c175c75cf318cfa7a8a1a2ad5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_TO_PURGE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">4       <span class="comment">/* update undo segment will not be</span></div>
<div class="line"><span class="comment">                                        reused: it can be freed in purge when</span></div>
<div class="line"><span class="comment">                                        all undo data in it is removed */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad731492924e06471984f99d5f59d59a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_TRX_ID&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The undo log header. There can be several undo log headers on the first
</pre><p> page of an update undo log segment. Transaction id </p>

</div>
</div>
<a class="anchor" id="a719b18197bfb01c0292995506538f445"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_TRX_NO&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transaction number of the transaction; defined only if the log is in a history list </p>

</div>
</div>
<a class="anchor" id="a690ce47aca0d2f09063384c8b50a2f43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPDATE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">2       <span class="comment">/* contains undo entries for updates</span></div>
<div class="line"><span class="comment">                                        and delete markings: in short,</span></div>
<div class="line"><span class="comment">                                        modifys (the name &#39;UPDATE&#39; is a</span></div>
<div class="line"><span class="comment">                                        historical relic) */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c9fc1de411ca05342b48353860ff824"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_XA_BQUAL_LEN&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#aa4053dcba228d4d5370f91492452c2a0">TRX_UNDO_XA_TRID_LEN</a> + 4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structxid__t.html#a098cc2935df7fb767e39110c82d9fc08">xid_t::bqual_length</a> </p>

</div>
</div>
<a class="anchor" id="ada98715799eab7dea1f55e0e3aaadce5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_XA_FORMAT&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#a1102a9f4843a83f67018860e0bcf5b20">TRX_UNDO_LOG_OLD_HDR_SIZE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>X/Open XA Transaction Identification (XID) <a class="el" href="structxid__t.html#a2147f4d83ff0ee9e8f8eed9d0d2bbed7">xid_t::formatID</a> </p>

</div>
</div>
<a class="anchor" id="aa4053dcba228d4d5370f91492452c2a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_XA_TRID_LEN&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#ada98715799eab7dea1f55e0e3aaadce5">TRX_UNDO_XA_FORMAT</a> + 4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structxid__t.html#a397b076f51293c960321fea7c64f201b">xid_t::gtrid_length</a> </p>

</div>
</div>
<a class="anchor" id="abc4f59f064e7b22a2ddc421df893d021"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_XA_XID&#160;&#160;&#160;(<a class="el" href="trx0undo_8h.html#a6c9fc1de411ca05342b48353860ff824">TRX_UNDO_XA_BQUAL_LEN</a> + 4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Distributed transaction identifier data </p>

</div>
</div>
<a class="anchor" id="a84cc5b863aaf13474c2a67f55d45bf19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_XID_EXISTS&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TRUE if undo log header includes X/Open XA transaction identification XID </p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a0310ed42747e8c3e3ab2158aab3857d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> trx_read_roll_ptr </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a roll ptr from an index page. In case that the roll ptr size changes in some future version, this function should be used instead of mach_read_... </p>
<dl class="section return"><dt>Returns</dt><dd>roll ptr in: pointer to memory from where to read</dd></dl>
<p>Reads a roll ptr from an index page. In case that the roll ptr size changes in some future version, this function should be used instead of mach_read_... </p>
<dl class="section return"><dt>Returns</dt><dd>roll ptr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: pointer to memory from where to read </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1bc5b098f043369f7cd5482fcb202662"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structbuf__block__t.html">buf_block_t</a>* trx_undo_add_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to add a page to the undo log segment where the undo log is placed. </p>
<dl class="section return"><dt>Returns</dt><dd>X-latched block if success, else NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in: undo log memory object </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr which does not have a latch to any undo log page; the caller must have reserved the rollback segment mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a43891374222064f5466d9658b202311a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_assign_undo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assigns an undo log for a transaction. A new undo log is created or a cached undo log reused. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if undo log assign successful, possible error codes are: DB_TOO_MANY_CONCURRENT_TRXS DB_OUT_OF_FILE_SPACE DB_READ_ONLY DB_OUT_OF_MEMORY </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">type</td><td>in: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a75d19c81c579ac7bde1e4eb444467dc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> trx_undo_build_roll_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td>
          <td class="paramname"><em>is_insert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>rseg_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a roll pointer. </p>
<dl class="section return"><dt>Returns</dt><dd>roll pointer in: offset of the undo entry within page</dd></dl>
<p>Builds a roll pointer. </p>
<dl class="section return"><dt>Returns</dt><dd>roll pointer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_insert</td><td>in: TRUE if insert undo log </td></tr>
    <tr><td class="paramname">rseg_id</td><td>in: rollback segment id </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: offset of the undo entry within page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a99999bd86937196c9e3474c75a756e06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_undo_decode_roll_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> *&#160;</td>
          <td class="paramname"><em>is_insert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>rseg_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decodes a roll pointer. out: offset of the undo entry within page</p>
<p>Decodes a roll pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer </td></tr>
    <tr><td class="paramname">is_insert</td><td>out: TRUE if insert undo log </td></tr>
    <tr><td class="paramname">rseg_id</td><td>out: rollback segment id </td></tr>
    <tr><td class="paramname">page_no</td><td>out: page number </td></tr>
    <tr><td class="paramname">offset</td><td>out: offset of the undo entry within page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9dbaccaf04096907406233fdab0997e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_free_last_page_func </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the last undo log page. The caller must hold the rollback segment mutex. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in/out: undo log memory copy </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction which does not have a latch to any undo log page or which has allocated the undo log page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adacb180235b76ef4f62e51ff1ae7c0eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_free_prepared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>At shutdown, frees the undo logs of a PREPARED transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: PREPARED transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1c5381a831e5dbb1b304098975be23bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_first_rec </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the first record in an undo log. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page latched, NULL if none in: mtr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">space</td><td>in: undo log header space </td></tr>
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes or 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
    <tr><td class="paramname">mode</td><td>in: latching mode: RW_S_LATCH or RW_X_LATCH </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6843a910c265943c2f5a0c050d7ea0e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_next_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the next record in an undo log. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched, NULL if none in: mtr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a401e2a2547a1e86a57165fabba15ced7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_prev_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the previous record in an undo log. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched, NULL if none in: mtr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
    <tr><td class="paramname">shared</td><td>in: true=S-latch, false=X-latch </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5cf5458624c75a3b5d0aa246bf2fe3a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_insert_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees or caches an insert undo log after a transaction commit or rollback. Knowledge of inserts is not needed after a commit or rollback, therefore the data can be discarded. in: transaction handle </p>

</div>
</div>
<a class="anchor" id="aa5e2fe0371635fbb23dad87a258164a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulint trx_undo_lists_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the undo log lists for a rollback segment memory copy. This function is only called when the database is started or a new rollback segment created. </p>
<dl class="section return"><dt>Returns</dt><dd>the combined size of undo log segments in pages in: rollback segment memory object </dd></dl>

</div>
</div>
<a class="anchor" id="a91c468bb2123f0e65c01a1c6dd773ed6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_page_get </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets an undo log page and x-latches it. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to page x-latched in: mtr</dd></dl>
<p>Gets an undo log page and x-latches it. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to page x-latched </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">space</td><td>in: space where placed </td></tr>
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes or 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acec472401b15a890533d83013e03eb18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_page_get_first_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the first undo record on the page in the specified undo log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none in: undo log header offset on page</dd></dl>
<p>Returns the first undo record on the page in the specified undo log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ace4052df57f1530cd8ddf3b88e5c4b02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_page_get_last_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the last undo record on the page in the specified undo log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none in: undo log header offset on page</dd></dl>
<p>Returns the last undo record on the page in the specified undo log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a947c52d195d7ee1a60718354e18cc08b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_page_get_next_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the next undo log record on the page in the specified log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none in: undo log header offset on page</dd></dl>
<p>Returns the next undo log record on the page in the specified log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac85d1faa279ebe0025f6d2a6d4643b12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_page_get_prev_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the previous undo record on the page in the specified log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none in: undo log header offset on page</dd></dl>
<p>Returns the previous undo record on the page in the specified log, or NULL if none exists. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to record, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a14227732ee44962b7deb045d3f4f05c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_page_get_s_latched </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets an undo log page and s-latches it. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to page s-latched in: mtr</dd></dl>
<p>Gets an undo log page and s-latches it. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to page s-latched </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">space</td><td>in: space where placed </td></tr>
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes or 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae4709ff04567aaad2c3fd851c2ff4040"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_parse_discard_latest </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses the redo log entry of an undo log page header discard. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: mtr or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad84a0a4d5fcac22c5ab826ebabcf625c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_parse_page_header </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses the redo log entry of an undo log page header create or reuse. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: mtr or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>in: MLOG_UNDO_HDR_CREATE or MLOG_UNDO_HDR_REUSE </td></tr>
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aac375f4379a6069f3f8f2ef03e93cbdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_parse_page_init </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses the redo log entry of an undo log page initialization. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: mtr or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a07f8a1930550c8e69e70cea94428aa59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> trx_undo_roll_ptr_is_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns TRUE if the roll pointer is of the insert type. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if insert undo log in: roll pointer</dd></dl>
<p>Returns TRUE if the roll pointer is of the insert type. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if insert undo log </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0390b8ccd9623edba3655f4a8875e225"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_set_state_at_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the state of the undo log segment at a transaction finish. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log segment header page, x-latched in: mtr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo</td><td>in: undo log memory copy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3a731b5d0da0343f4f42d5b60ae0c8ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_set_state_at_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the state of the undo log segment at a transaction prepare. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log segment header page, x-latched in: mtr </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in: undo log memory copy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0b5b608178d72790337076e4db0ab6b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_truncate_end_func </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Truncates an undo log from the end. This function is used during a rollback to free space from an undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction whose undo log it is </td></tr>
    <tr><td class="paramname">undo</td><td>in/out: undo log </td></tr>
    <tr><td class="paramname">limit</td><td>in: all undo records with undo number &gt;= this value should be truncated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9c96ff3ced71317156fc9cbfa0255054"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_truncate_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hdr_page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hdr_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Truncates an undo log from the start. This function is used during a purge operation. in: all undo pages with undo numbers &lt; this value should be truncated; NOTE that the function only frees whole pages; the header page is not freed, but emptied, if all the records there are &lt; limit </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">space</td><td>in: space id of the log </td></tr>
    <tr><td class="paramname">hdr_page_no</td><td>in: header page number </td></tr>
    <tr><td class="paramname">hdr_offset</td><td>in: header offset on the page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a86a2f48a054e0f266464bbb8ba25ac2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE bool trx_undo_trx_id_is_insert </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>trx_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if the record is of the insert type. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the record was freshly inserted (not updated). </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx_id</td><td>in: DB_TRX_ID, followed by DB_ROLL_PTR </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a204e5f56556f703e62e29c393f74e4e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_update_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the update undo log header as the first in the history list, and frees the memory object, or puts it to the list of cached update undo log segments. in: mtr </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: trx owning the update undo log </td></tr>
    <tr><td class="paramname">undo_page</td><td>in: update undo log header page, x-latched </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a217d801284210e8ce80b23e6caf1f7e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_write_roll_ptr </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a roll ptr to an index page. In case that the size changes in some future version, this function should be used instead of mach_write_... in: roll ptr</p>
<p>Writes a roll ptr to an index page. In case that the size changes in some future version, this function should be used instead of mach_write_... </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: pointer to memory where written </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>in: roll ptr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 21 2015 18:11:21 for InnoDB Plugin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
