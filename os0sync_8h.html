<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InnoDB Plugin: include/os0sync.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">InnoDB Plugin
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">os0sync.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="univ_8i.html">univ.i</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ut0lst_8h_source.html">ut0lst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sync0types_8h_source.html">sync0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="os0sync_8ic.html">os0sync.ic</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for os0sync.h:</div>
<div class="dyncontent">
<div class="center"><img src="os0sync_8h__incl.png" border="0" usemap="#include_2os0sync_8h" alt=""/></div>
<map name="include_2os0sync_8h" id="include_2os0sync_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="os0sync_8h__dep__incl.png" border="0" usemap="#include_2os0sync_8hdep" alt=""/></div>
<map name="include_2os0sync_8hdep" id="include_2os0sync_8hdep">
</map>
</div>
</div>
<p><a href="os0sync_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__event.html">os_event</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a06178051119fa2ba3b3da8fbf1b6f3ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a06178051119fa2ba3b3da8fbf1b6f3ee">OS_SYNC_INFINITE_TIME</a>&#160;&#160;&#160;<a class="el" href="univ_8i.html#ae39f11b1dde51a5aeccea64553aa785a">ULINT_UNDEFINED</a></td></tr>
<tr class="memitem:a1a93c05e754d0adb3a2131bfd68dfab6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a1a93c05e754d0adb3a2131bfd68dfab6">OS_SYNC_TIME_EXCEEDED</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:a11e5503b49f72100d2a17615ed320591"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11e5503b49f72100d2a17615ed320591"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_event_wait</b>(event)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a02b3b122583d13b50f17eaf6891a227e">os_event_wait_low</a>(event, 0)</td></tr>
<tr class="memitem:a3c840e32d48175787ae4c5f6c04c56c2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c840e32d48175787ae4c5f6c04c56c2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_event_wait_time</b>(event, t)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a1a1cb6e8b177ec7c3c2f0a86eee8cd44">os_event_wait_time_low</a>(event, t, 0)</td></tr>
<tr class="memitem:a472f3a11a2aee093b5fb1445ba563a17"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a472f3a11a2aee093b5fb1445ba563a17"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_fast_mutex_init</b>(K, M)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a63aae815dbb053480118ac80906d6ee4">os_fast_mutex_init_func</a>(&amp;((<a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a>*)(M))-&gt;mutex)</td></tr>
<tr class="memitem:aad9d2949febf0ee42b82088d10b7b886"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad9d2949febf0ee42b82088d10b7b886"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_fast_mutex_lock</b>(M)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#adf8a2bde9dd7885d66d6ffa271049367">os_fast_mutex_lock_func</a>(&amp;((<a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a>*)(M))-&gt;mutex)</td></tr>
<tr class="memitem:a5d3665a9dfa57a49df2b62f695e230f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d3665a9dfa57a49df2b62f695e230f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_fast_mutex_unlock</b>(M)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a762de53c3c9ec39034a8c7f7e8597a95">os_fast_mutex_unlock_func</a>(&amp;((<a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a>*)(M))-&gt;mutex)</td></tr>
<tr class="memitem:ac2f3cbb8bf04c195cdcbf6504c66326b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2f3cbb8bf04c195cdcbf6504c66326b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_fast_mutex_free</b>(M)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a22eaede929351efa8488112e8df4aece">os_fast_mutex_free_func</a>(&amp;((<a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a>*)(M))-&gt;mutex)</td></tr>
<tr class="memitem:a0a97e044fb52b5f3b689336b7bfb0973"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a0a97e044fb52b5f3b689336b7bfb0973">IB_ATOMICS_STARTUP_MSG</a>&#160;&#160;&#160;&quot;Mutexes and rw_locks use InnoDB's own implementation&quot;</td></tr>
<tr class="memitem:ab28b7ad45e7e1a3d93805c6b892ffb03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab28b7ad45e7e1a3d93805c6b892ffb03"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_atomic_inc_ulint</b>(m, v, d)&#160;&#160;&#160;<a class="el" href="sync0sync_8ic.html#ad5bde584ba1a2cfa0039b639fb7ba699">os_atomic_inc_ulint_func</a>(m, v, d)</td></tr>
<tr class="memitem:a6535ce1a26f3413f26fe525b49fc7990"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6535ce1a26f3413f26fe525b49fc7990"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_atomic_dec_ulint</b>(m, v, d)&#160;&#160;&#160;<a class="el" href="sync0sync_8ic.html#a707624b4a41b0302e14f5e298d2ca0b0">os_atomic_dec_ulint_func</a>(m, v, d)</td></tr>
<tr class="memitem:a2621659c3cfd6d38a7a58a43a39cae54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a2621659c3cfd6d38a7a58a43a39cae54">os_increment_counter_by_amount</a>(mutex, counter, amount)</td></tr>
<tr class="memitem:ace82e34f45c600f97f8d6d43b14defc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_decrement_counter_by_amount</b>(mutex, counter, amount)</td></tr>
<tr class="memitem:a90a94b4b31e020b17cf0231636fb1c5c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90a94b4b31e020b17cf0231636fb1c5c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_inc_counter</b>(mutex, counter)&#160;&#160;&#160;<a class="el" href="os0sync_8h.html#a2621659c3cfd6d38a7a58a43a39cae54">os_increment_counter_by_amount</a>(mutex, counter, 1)</td></tr>
<tr class="memitem:ad6c7f1ddcce37444d2cbbd93e924ec57"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_dec_counter</b>(mutex, counter)</td></tr>
<tr class="memitem:ab880995dd351994863de775306386785"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ab880995dd351994863de775306386785">os_rmb</a></td></tr>
<tr class="memitem:ae2ca9177ad374332030b7cda6b5879d8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2ca9177ad374332030b7cda6b5879d8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>os_wmb</b></td></tr>
<tr class="memitem:acfce5bb6907c07d1fc0a8c214b45fbdf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfce5bb6907c07d1fc0a8c214b45fbdf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IB_MEMORY_BARRIER_STARTUP_MSG</b>&#160;&#160;&#160;&quot;Memory barrier is not used&quot;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2152a45378ff5b76f479d2c5a205497f"><td class="memItemLeft" align="right" valign="top">typedef pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a></td></tr>
<tr class="memitem:a342f1c2f670bd18fc784027d244ef667"><td class="memItemLeft" align="right" valign="top">typedef pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a342f1c2f670bd18fc784027d244ef667">os_cond_t</a></td></tr>
<tr class="memitem:ae24909be432e4a95bd956a707e4d1d20"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structos__event.html">os_event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a></td></tr>
<tr class="memitem:a21c139c6cdbef5b007a02633f2d4732a"><td class="memItemLeft" align="right" valign="top">typedef struct os_mutex_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac5ba2f27c699220d6b8f471f69577bb6"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ac5ba2f27c699220d6b8f471f69577bb6">os_sync_init</a> (void)</td></tr>
<tr class="memitem:a4696d9aa3bf70a003c65e6f4105fcc45"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a4696d9aa3bf70a003c65e6f4105fcc45">os_sync_free</a> (void)</td></tr>
<tr class="memitem:a4ac7fe024c2ab6f49e5080bb37b5a716"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a4ac7fe024c2ab6f49e5080bb37b5a716">os_event_create</a> (void)</td></tr>
<tr class="memitem:a56a3161cba9022198b37665b91330634"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a56a3161cba9022198b37665b91330634">os_event_set</a> (<a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> event)</td></tr>
<tr class="memitem:a0fbc346d1338428b5df40a47524cd2af"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ib_int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset</a> (<a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> event)</td></tr>
<tr class="memitem:a854dede3c699c09a06a1e55b44bf78b7"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a854dede3c699c09a06a1e55b44bf78b7">os_event_free</a> (<a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> event)</td></tr>
<tr class="memitem:a02b3b122583d13b50f17eaf6891a227e"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a02b3b122583d13b50f17eaf6891a227e">os_event_wait_low</a> (<a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> event, ib_int64_t reset_sig_count)</td></tr>
<tr class="memitem:a1a1cb6e8b177ec7c3c2f0a86eee8cd44"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a1a1cb6e8b177ec7c3c2f0a86eee8cd44">os_event_wait_time_low</a> (<a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> event, ulint time_in_usec, ib_int64_t reset_sig_count)</td></tr>
<tr class="memitem:ab2f1a2dc2b58a30c39a9d972477b1820"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ab2f1a2dc2b58a30c39a9d972477b1820">os_mutex_create</a> (void)</td></tr>
<tr class="memitem:ace10b281e6b767dc0478a1152fa76e4d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ace10b281e6b767dc0478a1152fa76e4d">os_mutex_enter</a> (<a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a> mutex)</td></tr>
<tr class="memitem:ac3adf0d16a2b54be3cc96600381127c5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ac3adf0d16a2b54be3cc96600381127c5">os_mutex_exit</a> (<a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a> mutex)</td></tr>
<tr class="memitem:a69c145c32a4c73036ad37c41b2e4e4e3"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a69c145c32a4c73036ad37c41b2e4e4e3">os_mutex_free</a> (<a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a> mutex)</td></tr>
<tr class="memitem:a2313931c73a6564081e432cece2c108a"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a2313931c73a6564081e432cece2c108a">os_fast_mutex_trylock</a> (<a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a> *fast_mutex)</td></tr>
<tr class="memitem:a762de53c3c9ec39034a8c7f7e8597a95"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a762de53c3c9ec39034a8c7f7e8597a95">os_fast_mutex_unlock_func</a> (<a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *fast_mutex)</td></tr>
<tr class="memitem:a63aae815dbb053480118ac80906d6ee4"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a63aae815dbb053480118ac80906d6ee4">os_fast_mutex_init_func</a> (<a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *fast_mutex)</td></tr>
<tr class="memitem:adf8a2bde9dd7885d66d6ffa271049367"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#adf8a2bde9dd7885d66d6ffa271049367">os_fast_mutex_lock_func</a> (<a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *fast_mutex)</td></tr>
<tr class="memitem:a22eaede929351efa8488112e8df4aece"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#a22eaede929351efa8488112e8df4aece">os_fast_mutex_free_func</a> (<a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *fast_mutex)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adc6d1cfe471cbd89afb2a20c147528db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#adc6d1cfe471cbd89afb2a20c147528db">os_sync_mutex</a></td></tr>
<tr class="memitem:ad9acba211b449823041a510d3d373210"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os0sync_8h.html#ad9acba211b449823041a510d3d373210">os_thread_count</a></td></tr>
<tr class="memitem:a329639a4a39b6ae209d720f4844af16f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a329639a4a39b6ae209d720f4844af16f"></a>
ulint&#160;</td><td class="memItemRight" valign="bottom"><b>os_event_count</b></td></tr>
<tr class="memitem:a264d0c110b92d6558d4e85f602741191"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a264d0c110b92d6558d4e85f602741191"></a>
ulint&#160;</td><td class="memItemRight" valign="bottom"><b>os_mutex_count</b></td></tr>
<tr class="memitem:ab458a8638485e1dc2ac2ffb6d03b1a0f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab458a8638485e1dc2ac2ffb6d03b1a0f"></a>
ulint&#160;</td><td class="memItemRight" valign="bottom"><b>os_fast_mutex_count</b></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The interface to the operating system synchronization primitives.</p>
<p>Created 9/6/1995 Heikki Tuuri </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a0a97e044fb52b5f3b689336b7bfb0973"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IB_ATOMICS_STARTUP_MSG&#160;&#160;&#160;&quot;Mutexes and rw_locks use InnoDB's own implementation&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Atomic compare-and-swap and increment for InnoDB. </p>

</div>
</div>
<a class="anchor" id="ad6c7f1ddcce37444d2cbbd93e924ec57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_dec_counter</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">counter&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                    \</div>
<div class="line">                os_decrement_counter_by_amount(mutex, counter, 1);\</div>
<div class="line">        } <span class="keywordflow">while</span> (0);</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace82e34f45c600f97f8d6d43b14defc0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_decrement_counter_by_amount</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">counter, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">amount&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                    \</div>
<div class="line">                ut_a(counter &gt;= amount);                        \</div>
<div class="line">                mutex_enter(&amp;(mutex));                          \</div>
<div class="line">                (counter) -= (amount);                          \</div>
<div class="line">                mutex_exit(&amp;(mutex));                           \</div>
<div class="line">        } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2621659c3cfd6d38a7a58a43a39cae54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_increment_counter_by_amount</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">counter, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">amount&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                    \</div>
<div class="line">                mutex_enter(&amp;(mutex));                          \</div>
<div class="line">                (counter) += (amount);                          \</div>
<div class="line">                mutex_exit(&amp;(mutex));                           \</div>
<div class="line">        } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Following macros are used to update specified counter atomically if HAVE_ATOMIC_BUILTINS defined. Otherwise, use mutex passed in for synchronization </p>

</div>
</div>
<a class="anchor" id="ab880995dd351994863de775306386785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_rmb</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>barrier definitions for memory ordering </p>

</div>
</div>
<a class="anchor" id="a06178051119fa2ba3b3da8fbf1b6f3ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_SYNC_INFINITE_TIME&#160;&#160;&#160;<a class="el" href="univ_8i.html#ae39f11b1dde51a5aeccea64553aa785a">ULINT_UNDEFINED</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Denotes an infinite delay for os_event_wait_time() </p>

</div>
</div>
<a class="anchor" id="a1a93c05e754d0adb3a2131bfd68dfab6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_SYNC_TIME_EXCEEDED&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return value of os_event_wait_time() when the time is exceeded </p>

</div>
</div>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a2152a45378ff5b76f479d2c5a205497f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef pthread_mutex_t <a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Native mutex </p>

</div>
</div>
<a class="anchor" id="a342f1c2f670bd18fc784027d244ef667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef pthread_cond_t <a class="el" href="os0sync_8h.html#a342f1c2f670bd18fc784027d244ef667">os_cond_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Native condition variable </p>

</div>
</div>
<a class="anchor" id="ae24909be432e4a95bd956a707e4d1d20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structos__event.html">os_event</a>* <a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Operating system event handle </p>

</div>
</div>
<a class="anchor" id="a21c139c6cdbef5b007a02633f2d4732a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct os_mutex_t* <a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Operating system mutex handle </p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a4ac7fe024c2ab6f49e5080bb37b5a716"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a> os_event_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an event semaphore, i.e., a semaphore which may just have two states: signaled and nonsignaled. The created event is manual reset: it must be reset explicitly by calling sync_os_reset_event. </p>
<dl class="section return"><dt>Returns</dt><dd>the event handle </dd></dl>

</div>
</div>
<a class="anchor" id="a854dede3c699c09a06a1e55b44bf78b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_event_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees an event object. in: event to free </p>

</div>
</div>
<a class="anchor" id="a0fbc346d1338428b5df40a47524cd2af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ib_int64_t os_event_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets an event semaphore to the nonsignaled state. Waiting threads will stop to wait for the event. The return value should be passed to os_even_wait_low() if it is desired that this thread should not wait in case of an intervening call to <a class="el" href="os0sync_8h.html#a56a3161cba9022198b37665b91330634">os_event_set()</a> between this <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a> and the <a class="el" href="os0sync_8h.html#a02b3b122583d13b50f17eaf6891a227e">os_event_wait_low()</a> call. See comments for <a class="el" href="os0sync_8h.html#a02b3b122583d13b50f17eaf6891a227e">os_event_wait_low()</a>. in: event to reset </p>

</div>
</div>
<a class="anchor" id="a56a3161cba9022198b37665b91330634"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_event_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets an event semaphore to the signaled state: lets waiting threads proceed. in: event to set </p>

</div>
</div>
<a class="anchor" id="a02b3b122583d13b50f17eaf6891a227e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_event_wait_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t&#160;</td>
          <td class="paramname"><em>reset_sig_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits for an event object until it is in the signaled state.</p>
<p>Typically, if the event has been signalled after the <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a> we'll return immediately because event-&gt;is_set == TRUE. There are, however, situations (e.g.: sync_array code) where we may lose this information. For example:</p>
<p>thread A calls <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a> thread B calls <a class="el" href="os0sync_8h.html#a56a3161cba9022198b37665b91330634">os_event_set()</a> [event-&gt;is_set == TRUE] thread C calls <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a> [event-&gt;is_set == FALSE] thread A calls os_event_wait() [infinite wait!] thread C calls os_event_wait() [infinite wait!]</p>
<p>Where such a scenario is possible, to avoid infinite wait, the value returned by <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a> should be passed in as reset_sig_count. in: zero or the value returned by previous call of <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>in: event to wait </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1a1cb6e8b177ec7c3c2f0a86eee8cd44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulint os_event_wait_time_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#ae24909be432e4a95bd956a707e4d1d20">os_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>time_in_usec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t&#160;</td>
          <td class="paramname"><em>reset_sig_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits for an event object until it is in the signaled state or a timeout is exceeded. In Unix the timeout is always infinite. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, OS_SYNC_TIME_EXCEEDED if timeout was exceeded in: zero or the value returned by previous call of <a class="el" href="os0sync_8h.html#a0fbc346d1338428b5df40a47524cd2af">os_event_reset()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>in: event to wait </td></tr>
    <tr><td class="paramname">time_in_usec</td><td>in: timeout in microseconds, or OS_SYNC_INFINITE_TIME </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a22eaede929351efa8488112e8df4aece"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_fast_mutex_free_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>fast_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees an mutex object. in: mutex to free </p>

</div>
</div>
<a class="anchor" id="a63aae815dbb053480118ac80906d6ee4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_fast_mutex_init_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>fast_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes an operating system fast mutex semaphore. in: fast mutex </p>

</div>
</div>
<a class="anchor" id="adf8a2bde9dd7885d66d6ffa271049367"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_fast_mutex_lock_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>fast_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquires ownership of a fast mutex. in: mutex to acquire </p>

</div>
</div>
<a class="anchor" id="a2313931c73a6564081e432cece2c108a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint os_fast_mutex_trylock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structos__fast__mutex__t.html">os_fast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>fast_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquires ownership of a fast mutex. Currently in Windows this is the same as os_fast_mutex_lock! </p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, != 0 if was reserved by another thread in: mutex to acquire</dd></dl>
<p>Acquires ownership of a fast mutex. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, != 0 if was reserved by another thread </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fast_mutex</td><td>in: mutex to acquire </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a762de53c3c9ec39034a8c7f7e8597a95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_fast_mutex_unlock_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a2152a45378ff5b76f479d2c5a205497f">fast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>fast_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases ownership of a fast mutex. in: mutex to release </p>

</div>
</div>
<a class="anchor" id="ab2f1a2dc2b58a30c39a9d972477b1820"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a> os_mutex_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an operating system mutex semaphore. Because these are slow, the mutex semaphore of InnoDB itself (<a class="el" href="structib__mutex__t.html">ib_mutex_t</a>) should be used where possible. </p>
<dl class="section return"><dt>Returns</dt><dd>the mutex handle </dd></dl>

</div>
</div>
<a class="anchor" id="ace10b281e6b767dc0478a1152fa76e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_mutex_enter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a>&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquires ownership of a mutex semaphore. in: mutex to acquire </p>

</div>
</div>
<a class="anchor" id="ac3adf0d16a2b54be3cc96600381127c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_mutex_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a>&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases ownership of a mutex. in: mutex to release </p>

</div>
</div>
<a class="anchor" id="a69c145c32a4c73036ad37c41b2e4e4e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_mutex_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a>&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees an mutex object. in: mutex to free </p>

</div>
</div>
<a class="anchor" id="a4696d9aa3bf70a003c65e6f4105fcc45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_sync_free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees created events and OS 'slow' mutexes. </p>

</div>
</div>
<a class="anchor" id="ac5ba2f27c699220d6b8f471f69577bb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void os_sync_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes global event and OS 'slow' mutex lists. </p>

</div>
</div>
<h2>Variable Documentation</h2>
<a class="anchor" id="adc6d1cfe471cbd89afb2a20c147528db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="os0sync_8h.html#a21c139c6cdbef5b007a02633f2d4732a">os_ib_mutex_t</a> os_sync_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutex protecting counts and the event and OS 'slow' mutex lists </p>

</div>
</div>
<a class="anchor" id="ad9acba211b449823041a510d3d373210"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint os_thread_count</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This is incremented by 1 in os_thread_create and decremented by 1 in
</pre><p> os_thread_exit </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 21 2015 18:11:20 for InnoDB Plugin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
