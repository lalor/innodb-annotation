<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InnoDB Plugin: include/ibuf0ibuf.ic File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">InnoDB Plugin
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ibuf0ibuf.ic File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="page0page_8h_source.html">page0page.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="page0zip_8h_source.html">page0zip.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="buf0lru_8h_source.html">buf0lru.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ibuf0ibuf.ic:</div>
<div class="dyncontent">
<div class="center"><img src="ibuf0ibuf_8ic__incl.png" border="0" usemap="#include_2ibuf0ibuf_8ic" alt=""/></div>
<map name="include_2ibuf0ibuf_8ic" id="include_2ibuf0ibuf_8ic">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ibuf0ibuf_8ic__dep__incl.png" border="0" usemap="#include_2ibuf0ibuf_8icdep" alt=""/></div>
<map name="include_2ibuf0ibuf_8icdep" id="include_2ibuf0ibuf_8icdep">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structibuf__t.html">ibuf_t</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9d99fb63cacb66dcc5fe7f34184baab7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#a9d99fb63cacb66dcc5fe7f34184baab7">IBUF_PAGE_SIZE_PER_FREE_SPACE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memitem:a13a92a73415b02f8d1676ec7904a20df"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13a92a73415b02f8d1676ec7904a20df"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ibuf_set_free_bits</b>(b, v, max)&#160;&#160;&#160;<a class="el" href="ibuf0ibuf_8ic.html#ab8dc5284b4a0856fc2ec6a3ade51ecd4">ibuf_set_free_bits_func</a>(b,v)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afd42ae8d7a74a8670e3084ee7e574c5d"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#afd42ae8d7a74a8670e3084ee7e574c5d">ibuf_mtr_start</a> (<a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:aa2ac53e0e8ef7adeeccbd63fa987826d"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#aa2ac53e0e8ef7adeeccbd63fa987826d">ibuf_mtr_commit</a> (<a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:ab8dc5284b4a0856fc2ec6a3ade51ecd4"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#ab8dc5284b4a0856fc2ec6a3ade51ecd4">ibuf_set_free_bits_func</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="mem0mem_8ic.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, ulint val)</td></tr>
<tr class="memitem:a0369066ee09b5aff6c0f2670ce753ef5"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#a0369066ee09b5aff6c0f2670ce753ef5">ibuf_should_try</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *index, ulint ignore_sec_unique)</td></tr>
<tr class="memitem:a27c125a2ccd65d38d1ce74d13b25a130"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#a27c125a2ccd65d38d1ce74d13b25a130">ibuf_inside</a> (const <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memitem:a264f49b69a06c6b96a704bbbf79f4bac"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#a264f49b69a06c6b96a704bbbf79f4bac">ibuf_bitmap_page</a> (ulint zip_size, ulint page_no)</td></tr>
<tr class="memitem:ab5936f386ee766ffcbc58324856039a1"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#ab5936f386ee766ffcbc58324856039a1">ibuf_index_page_calc_free_bits</a> (ulint zip_size, ulint max_ins_size)</td></tr>
<tr class="memitem:ad521c9cfb05071e4334095668e3e5de3"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#ad521c9cfb05071e4334095668e3e5de3">ibuf_index_page_calc_free_from_bits</a> (ulint zip_size, ulint bits)</td></tr>
<tr class="memitem:aa49bf11c13e717a94347069d5dc9abd7"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#aa49bf11c13e717a94347069d5dc9abd7">ibuf_index_page_calc_free_zip</a> (ulint zip_size, const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="mem0mem_8ic.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>)</td></tr>
<tr class="memitem:aeb4a088fa062ff1f613c988f24680b6d"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#aeb4a088fa062ff1f613c988f24680b6d">ibuf_index_page_calc_free</a> (ulint zip_size, const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="mem0mem_8ic.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>)</td></tr>
<tr class="memitem:a7c9b8d6c6a893191b914c6193faadcc0"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ibuf0ibuf_8ic.html#a7c9b8d6c6a893191b914c6193faadcc0">ibuf_update_free_bits_if_full</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="mem0mem_8ic.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, ulint max_ins_size, ulint increase)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Insert buffer</p>
<p>Created 7/19/1997 Heikki Tuuri </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a9d99fb63cacb66dcc5fe7f34184baab7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IBUF_PAGE_SIZE_PER_FREE_SPACE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">An index page must contain at least UNIV_PAGE_SIZE /
</pre><p> IBUF_PAGE_SIZE_PER_FREE_SPACE bytes of free space for ibuf to try to buffer inserts to this page. If there is this much of free space, the corresponding bits are set in the ibuf bitmap. </p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a264f49b69a06c6b96a704bbbf79f4bac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> ibuf_bitmap_page </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if a page address is an ibuf bitmap page address. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if a bitmap page </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes; 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeb4a088fa062ff1f613c988f24680b6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint ibuf_index_page_calc_free </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translates the free space on a page to a value in the ibuf bitmap. </p>
<dl class="section return"><dt>Returns</dt><dd>value for ibuf bitmap bits </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes; 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">block</td><td>in: buffer block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab5936f386ee766ffcbc58324856039a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint ibuf_index_page_calc_free_bits </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>max_ins_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translates the free space on a page to a value in the ibuf bitmap. </p>
<dl class="section return"><dt>Returns</dt><dd>value for ibuf bitmap bits </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes; 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">max_ins_size</td><td>in: maximum insert size after reorganize for the page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad521c9cfb05071e4334095668e3e5de3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint ibuf_index_page_calc_free_from_bits </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translates the ibuf free bits to the free space on a page in bytes. </p>
<dl class="section return"><dt>Returns</dt><dd>maximum insert size after reorganize for the page </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes; 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">bits</td><td>in: value for ibuf bitmap bits </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa49bf11c13e717a94347069d5dc9abd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint ibuf_index_page_calc_free_zip </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translates the free space on a compressed page to a value in the ibuf bitmap. </p>
<dl class="section return"><dt>Returns</dt><dd>value for ibuf bitmap bits </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes </td></tr>
    <tr><td class="paramname">block</td><td>in: buffer block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a27c125a2ccd65d38d1ce74d13b25a130"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> ibuf_inside </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns TRUE if the current OS thread is performing an insert buffer routine.</p>
<p>For instance, a read-ahead of non-ibuf pages is forbidden by threads that are executing an insert buffer routine. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if inside an insert buffer routine </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtr</td><td>in: mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa2ac53e0e8ef7adeeccbd63fa987826d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void ibuf_mtr_commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commits an insert buffer mini-transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afd42ae8d7a74a8670e3084ee7e574c5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void ibuf_mtr_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts an insert buffer mini-transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtr</td><td>out: mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab8dc5284b4a0856fc2ec6a3ade51ecd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void ibuf_set_free_bits_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the free bit of the page in the ibuf bitmap. This is done in a separate mini-transaction, hence this operation does not restrict further work to only ibuf bitmap operations, which would result if the latch to the bitmap page were kept. in: value to set: &lt; 4 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: index page of a non-clustered index; free bit is reset if page level is 0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0369066ee09b5aff6c0f2670ce753ef5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> ibuf_should_try </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>ignore_sec_unique</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A basic partial test if an insert to the insert buffer could be possible and recommended. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index where to insert </td></tr>
    <tr><td class="paramname">ignore_sec_unique</td><td>in: if != 0, we should ignore UNIQUE constraint on a secondary index when we decide </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7c9b8d6c6a893191b914c6193faadcc0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void ibuf_update_free_bits_if_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>max_ins_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>increase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the free bits of an uncompressed page in the ibuf bitmap if there is not enough free on the page any more. This is done in a separate mini-transaction, hence this operation does not restrict further work to only ibuf bitmap operations, which would result if the latch to the bitmap page were kept. NOTE: The free bits in the insert buffer bitmap must never exceed the free space on a page. It is unsafe to increment the bits in a separately committed mini-transaction, because in crash recovery, the free bits could momentarily be set too high. It is only safe to use this function for decrementing the free bits. Should more free space become available, we must not update the free bits here, because that would break crash recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: index page to which we have added new records; the free bits are updated if the index is non-clustered and non-unique and the page level is 0, and the page becomes fuller </td></tr>
    <tr><td class="paramname">max_ins_size</td><td>in: value of maximum insert size with reorganize before the latest operation performed to the page </td></tr>
    <tr><td class="paramname">increase</td><td>in: upper limit for the additional space used in the latest operation, if known, or ULINT_UNDEFINED </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 21 2015 18:11:20 for InnoDB Plugin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
