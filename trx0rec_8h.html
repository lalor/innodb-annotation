<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InnoDB Plugin: include/trx0rec.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">InnoDB Plugin
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0rec.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="univ_8i.html">univ.i</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="row0types_8h_source.html">row0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="dict0types_8h_source.html">dict0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="data0data_8h_source.html">data0data.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="rem0types_8h_source.html">rem0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="que0types_8h_source.html">que0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0rec_8ic.html">trx0rec.ic</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for trx0rec.h:</div>
<div class="dyncontent">
<div class="center"><img src="trx0rec_8h__incl.png" border="0" usemap="#include_2trx0rec_8h" alt=""/></div>
<map name="include_2trx0rec_8h" id="include_2trx0rec_8h">
<area shape="rect" id="node3" href="univ_8i.html" title="univ.i" alt="" coords="655,470,708,498"/><area shape="rect" id="node28" href="trx0types_8h.html" title="trx0types.h" alt="" coords="452,161,545,189"/><area shape="rect" id="node33" href="row0types_8h.html" title="row0types.h" alt="" coords="1720,83,1819,111"/><area shape="rect" id="node35" href="mtr0mtr_8h.html" title="mtr0mtr.h" alt="" coords="740,161,825,189"/><area shape="rect" id="node57" href="dict0types_8h.html" title="dict0types.h" alt="" coords="1564,315,1663,343"/><area shape="rect" id="node69" href="data0data_8h.html" title="data0data.h" alt="" coords="1364,161,1463,189"/><area shape="rect" id="node82" href="rem0types_8h.html" title="rem0types.h" alt="" coords="1843,83,1944,111"/><area shape="rect" id="node84" href="que0types_8h.html" title="que0types.h" alt="" coords="1517,83,1619,111"/><area shape="rect" id="node88" href="trx0rec_8ic.html" title="trx0rec.ic" alt="" coords="1968,83,2048,111"/><area shape="rect" id="node19" href="ut0dbg_8h.html" title="ut0dbg.h" alt="" coords="787,547,864,575"/><area shape="rect" id="node22" href="ut0ut_8h.html" title="ut0ut.h" alt="" coords="939,547,1005,575"/><area shape="rect" id="node25" href="db0err_8h.html" title="db0err.h" alt="" coords="899,625,973,653"/><area shape="rect" id="node30" href="ut0byte_8h.html" title="ut0byte.h" alt="" coords="432,393,515,421"/><area shape="rect" id="node38" href="mem0mem_8h.html" title="mem0mem.h" alt="" coords="835,315,944,343"/><area shape="rect" id="node42" href="dyn0dyn_8h.html" title="dyn0dyn.h" alt="" coords="537,238,625,266"/><area shape="rect" id="node46" href="buf0types_8h.html" title="buf0types.h" alt="" coords="649,238,745,266"/><area shape="rect" id="node48" href="sync0rw_8h.html" title="sync0rw.h" alt="" coords="712,315,795,343"/><area shape="rect" id="node52" href="mtr0types_8h.html" title="mtr0types.h" alt="" coords="976,315,1075,343"/><area shape="rect" id="node54" href="page0types_8h.html" title="page0types.h" alt="" coords="1209,238,1319,266"/><area shape="rect" id="node60" href="log0log_8h.html" title="log0log.h" alt="" coords="433,238,513,266"/><area shape="rect" id="node65" href="mtr0mtr_8ic.html" title="mtr0mtr.ic" alt="" coords="820,238,908,266"/><area shape="rect" id="node72" href="data0types_8h.html" title="data0types.h" alt="" coords="1444,238,1551,266"/><area shape="rect" id="node74" href="data0type_8h.html" title="data0type.h" alt="" coords="1393,393,1492,421"/><area shape="rect" id="node79" href="data0data_8ic.html" title="data0data.ic" alt="" coords="1084,238,1185,266"/></map>
</div>
</div>
<p><a href="trx0rec_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa33615de4352554c23bc129777776c50"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#aa33615de4352554c23bc129777776c50">trx_undo_rec_get_ptr</a>(undo_rec, undo_no)&#160;&#160;&#160;((undo_rec) + <a class="el" href="trx0rec_8ic.html#a32a6fe5cbd4c6730602a5dcee4d0bf8c">trx_undo_rec_get_offset</a>(undo_no))</td></tr>
<tr class="memitem:a68638a104879e7d71a298f105e931a12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68638a104879e7d71a298f105e931a12"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_INSERT_REC</b>&#160;&#160;&#160;11	/* fresh insert into clustered index */</td></tr>
<tr class="memitem:ab3bb6122832fe57dc4a20e56484d7e9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_UPD_EXIST_REC</b></td></tr>
<tr class="memitem:adad68e3a0bdf312e5ac4231cae931f7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_UPD_DEL_REC</b></td></tr>
<tr class="memitem:a81d03d47210ccfb93579a4fb30bbbee1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_DEL_MARK_REC</b></td></tr>
<tr class="memitem:ac7e3157451dbb20e57c176474aba8196"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_CMPL_INFO_MULT</b></td></tr>
<tr class="memitem:a80d5348d1a573af4aef6f3d08eadaeba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_UPD_EXTERN</b></td></tr>
<tr class="memitem:a89624e3de13054fc0c468b458bb892b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89624e3de13054fc0c468b458bb892b1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_INSERT_OP</b>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:a0c5248a5e8a2db6408ecd658de204eb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c5248a5e8a2db6408ecd658de204eb9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRX_UNDO_MODIFY_OP</b>&#160;&#160;&#160;2</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5e1f0958de74be10617679be4d52e76f"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a5e1f0958de74be10617679be4d52e76f">trx_undo_rec_copy</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap)</td></tr>
<tr class="memitem:ac16587ee578cdb99b41525cd4a9e3658"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ac16587ee578cdb99b41525cd4a9e3658">trx_undo_rec_get_type</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memitem:a0f620ad159449f5ef50b0896f129b577"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a0f620ad159449f5ef50b0896f129b577">trx_undo_rec_get_cmpl_info</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memitem:a1aebcafefa1ee5c243da7e9249c9f5e2"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a1aebcafefa1ee5c243da7e9249c9f5e2">trx_undo_rec_get_extern_storage</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memitem:a06cc7356840b50f7c121dd50ecad82a2"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a06cc7356840b50f7c121dd50ecad82a2">trx_undo_rec_get_undo_no</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memitem:a309b93a4fd07de4d01f5b48fa9c49b80"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a309b93a4fd07de4d01f5b48fa9c49b80">trx_undo_rec_get_offset</a> (<a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no))</td></tr>
<tr class="memitem:afaeb3c546bbfee99460ab376048293f0"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#afaeb3c546bbfee99460ab376048293f0">trx_undo_rec_get_pars</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec, ulint *type, ulint *cmpl_info, bool *updated_extern, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *undo_no, table_id_t *table_id))</td></tr>
<tr class="memitem:a9037c5b07e96236496566aec1ab6d779"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a9037c5b07e96236496566aec1ab6d779">trx_undo_rec_get_row_ref</a> (byte *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index, <a class="el" href="structdtuple__t.html">dtuple_t</a> **ref, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap)</td></tr>
<tr class="memitem:ac581a29dee852d0f0b26b6a11fa1e78d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ac581a29dee852d0f0b26b6a11fa1e78d">trx_undo_rec_skip_row_ref</a> (byte *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index)</td></tr>
<tr class="memitem:a0bd2202d53d5d1db38d7f45658a1e265"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a0bd2202d53d5d1db38d7f45658a1e265">trx_undo_update_rec_get_sys_cols</a> (byte *ptr, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, ulint *info_bits)</td></tr>
<tr class="memitem:a27c0a78cbf0b4182df0ae1d5cd443cc5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a27c0a78cbf0b4182df0ae1d5cd443cc5">trx_undo_update_rec_get_update</a> (byte *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, ulint info_bits, <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap, <a class="el" href="structupd__t.html">upd_t</a> **upd)</td></tr>
<tr class="memitem:a3a7cee34ac092d575f66a7b4e1570e57"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a3a7cee34ac092d575f66a7b4e1570e57">trx_undo_rec_get_partial_row</a> (byte *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index, <a class="el" href="structdtuple__t.html">dtuple_t</a> **row, <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> ignore_prefix, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap))</td></tr>
<tr class="memitem:ad4c535b4d1fd59a4e56cf4f43b442314"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ad4c535b4d1fd59a4e56cf4f43b442314">trx_undo_report_row_operation</a> (ulint flags, ulint op_type, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *clust_entry, const <a class="el" href="structupd__t.html">upd_t</a> *update, ulint cmpl_info, const rec_t *rec, const ulint *offsets, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr)</td></tr>
<tr class="memitem:aca242e6af95ab5b78913b0a87c8faed7"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#aca242e6af95ab5b78913b0a87c8faed7">trx_undo_get_undo_rec_low</a> (<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap))</td></tr>
<tr class="memitem:ab602aff57c59265be450b3c790f619cc"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ab602aff57c59265be450b3c790f619cc">trx_undo_prev_version_build</a> (const rec_t *index_rec, <a class="el" href="structmtr__t.html">mtr_t</a> *index_mtr, const rec_t *rec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *index, ulint *offsets, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap, rec_t **old_vers))</td></tr>
<tr class="memitem:a6d3d4129e3919c7c4f3b7f0d76c63440"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a6d3d4129e3919c7c4f3b7f0d76c63440">trx_undo_parse_add_undo_rec</a> (byte *ptr, byte *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *page)</td></tr>
<tr class="memitem:ac14da2c455ee318a96599acacf7e818f"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ac14da2c455ee318a96599acacf7e818f">trx_undo_parse_erase_page_end</a> (byte *ptr, byte *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9de1fa5a5c99bbc84b5678762a623cf3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9de1fa5a5c99bbc84b5678762a623cf3"></a>
UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>warn_unused_result</b></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Transaction undo log record</p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="ac7e3157451dbb20e57c176474aba8196"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_CMPL_INFO_MULT</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">16      <span class="comment">/* compilation info is multiplied by</span></div>
<div class="line"><span class="comment">                                        this and ORed to the type above */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81d03d47210ccfb93579a4fb30bbbee1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_DEL_MARK_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">14      <span class="comment">/* delete marking of a record; fields</span></div>
<div class="line"><span class="comment">                                        do not change */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa33615de4352554c23bc129777776c50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trx_undo_rec_get_ptr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">undo_rec, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">undo_no&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((undo_rec) + <a class="el" href="trx0rec_8ic.html#a32a6fe5cbd4c6730602a5dcee4d0bf8c">trx_undo_rec_get_offset</a>(undo_no))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the start of the undo record data area. </p>

</div>
</div>
<a class="anchor" id="adad68e3a0bdf312e5ac4231cae931f7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_DEL_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">13      <span class="comment">/* update of a delete marked record to</span></div>
<div class="line"><span class="comment">                                        a not delete marked record; also the</span></div>
<div class="line"><span class="comment">                                        fields of the record can change */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3bb6122832fe57dc4a20e56484d7e9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_EXIST_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">12      <span class="comment">/* update of a non-delete-marked</span></div>
<div class="line"><span class="comment">                                        record */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80d5348d1a573af4aef6f3d08eadaeba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_EXTERN</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">128     <span class="comment">/* This bit can be ORed to type_cmpl</span></div>
<div class="line"><span class="comment">                                        to denote that we updated external</span></div>
<div class="line"><span class="comment">                                        storage fields: used by purge to</span></div>
<div class="line"><span class="comment">                                        free the external storage */</span></div>
</div><!-- fragment -->
</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="aca242e6af95ab5b78913b0a87c8faed7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_undo_rec_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copies an undo record to heap. This function can be called if we know that the undo log record exists. </p>
<dl class="section return"><dt>Returns</dt><dd>own: copy of the record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer to record </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6d3d4129e3919c7c4f3b7f0d76c63440"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_parse_add_undo_rec </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses a redo log record of adding an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: page or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac14da2c455ee318a96599acacf7e818f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_parse_erase_page_end </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses a redo log record of erasing of an undo page end. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: mtr or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab602aff57c59265be450b3c790f619cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN bool trx_undo_prev_version_build </td>
          <td>(</td>
          <td class="paramtype">const rec_t *&#160;</td>
          <td class="paramname"><em>index_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>index_mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rec_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rec_t **&#160;</td>
          <td class="paramname"><em>old_vers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a previous version of a clustered index record. The caller must hold a latch on the index page of the clustered index record. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if previous version was built, or if it was an insert or the table has been rebuilt </td></tr>
    <tr><td class="paramname">false</td><td>if the previous version is earlier than purge_view, which means that it may have been removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index_rec</td><td>in: clustered index record in the index tree </td></tr>
    <tr><td class="paramname">index_mtr</td><td>in: mtr which contains the latch to index_rec page and purge_view </td></tr>
    <tr><td class="paramname">rec</td><td>in: version of a clustered index record </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: rec_get_offsets(rec, index) </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
    <tr><td class="paramname">old_vers</td><td>out, own: previous version, or NULL if rec is the first inserted version, or if history data has been deleted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5e1f0958de74be10617679be4d52e76f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_rec_copy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copies the undo record to the heap. </p>
<dl class="section return"><dt>Returns</dt><dd>own: copy of undo log record in: heap where copied</dd></dl>
<p>Copies the undo record to the heap. </p>
<dl class="section return"><dt>Returns</dt><dd>own: copy of undo log record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">heap</td><td>in: heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0f620ad159449f5ef50b0896f129b577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_rec_get_cmpl_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads from an undo log record the record compiler info. </p>
<dl class="section return"><dt>Returns</dt><dd>compiler info in: undo log record</dd></dl>
<p>Reads from an undo log record the record compiler info. </p>
<dl class="section return"><dt>Returns</dt><dd>compiler info </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1aebcafefa1ee5c243da7e9249c9f5e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> trx_undo_rec_get_extern_storage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns TRUE if an undo log record contains an extern storage field. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if extern in: undo log record</dd></dl>
<p>Returns TRUE if an undo log record contains an extern storage field. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if extern </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a309b93a4fd07de4d01f5b48fa9c49b80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_rec_get_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the start of the undo record data area. </p>
<dl class="section return"><dt>Returns</dt><dd>offset to the data area </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_no</td><td>in: undo no read from node </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afaeb3c546bbfee99460ab376048293f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_rec_get_pars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>updated_extern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *&#160;</td>
          <td class="paramname"><em>undo_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">table_id_t *&#160;</td>
          <td class="paramname"><em>table_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads from an undo log record the general parameters. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">type</td><td>out: undo record type: TRX_UNDO_INSERT_REC, ... </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>out: compiler info, relevant only for update type records </td></tr>
    <tr><td class="paramname">updated_extern</td><td>out: true if we updated an externally stored fild </td></tr>
    <tr><td class="paramname">undo_no</td><td>out: undo log record number </td></tr>
    <tr><td class="paramname">table_id</td><td>out: table id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3a7cee34ac092d575f66a7b4e1570e57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_rec_get_partial_row </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td>
          <td class="paramname"><em>ignore_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a partial row from an update undo log record, for purge. It contains the columns which occur as ordering in any index of the table. Any missing columns are indicated by col-&gt;mtype == DATA_MISSING. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record of a suitable type, at the start of the stored index columns; NOTE that this copy of the undo log record must be preserved as long as the partial row is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">row</td><td>out, own: partial row </td></tr>
    <tr><td class="paramname">ignore_prefix</td><td>in: flag to indicate if we expect blob prefixes in undo. Used only in the assertion. </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9037c5b07e96236496566aec1ab6d779"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_rec_get_row_ref </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a row reference from an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record in: memory heap from which the memory needed is allocated </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of a copy of an undo log record, at the start of the row reference; NOTE that this copy of the undo log record must be preserved as long as the row reference is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">ref</td><td>out, own: row reference </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac16587ee578cdb99b41525cd4a9e3658"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_rec_get_type </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the undo log record type. </p>
<dl class="section return"><dt>Returns</dt><dd>record type in: undo log record</dd></dl>
<p>Reads from an undo log record the record type. </p>
<dl class="section return"><dt>Returns</dt><dd>record type </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a06cc7356840b50f7c121dd50ecad82a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> trx_undo_rec_get_undo_no </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the undo log record number. </p>
<dl class="section return"><dt>Returns</dt><dd>undo no in: undo log record</dd></dl>
<p>Reads the undo log record number. </p>
<dl class="section return"><dt>Returns</dt><dd>undo no </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac581a29dee852d0f0b26b6a11fa1e78d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_rec_skip_row_ref </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Skips a row reference from an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record in: clustered index </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record, at the start of the row reference </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad4c535b4d1fd59a4e56cf4f43b442314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_report_row_operation </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>op_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>clust_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structupd__t.html">upd_t</a> *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rec_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes information to an undo log about an insert, update, or a delete marking of a clustered index record. This information is used in a rollback of the transaction and in consistent reads that must look to the history of this transaction. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>in: if BTR_NO_UNDO_LOG_FLAG bit is set, does nothing </td></tr>
    <tr><td class="paramname">op_type</td><td>in: TRX_UNDO_INSERT_OP or TRX_UNDO_MODIFY_OP </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">clust_entry</td><td>in: in the case of an insert, index entry to insert into the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">update</td><td>in: in the case of an update, the update vector, otherwise NULL </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>in: compiler info on secondary index updates </td></tr>
    <tr><td class="paramname">rec</td><td>in: case of an update or delete marking, the record in the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec) </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: rollback pointer to the inserted undo log record, 0 if BTR_NO_UNDO_LOG flag was specified </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0bd2202d53d5d1db38d7f45658a1e265"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_update_rec_get_sys_cols </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>info_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads from an undo log update record the system field values of the old version. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values out: info bits state </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of undo log record after reading general parameters </td></tr>
    <tr><td class="paramname">trx_id</td><td>out: trx id </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll ptr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a27c0a78cbf0b4182df0ae1d5cd443cc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN byte* trx_undo_update_rec_get_update </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>info_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupd__t.html">upd_t</a> **&#160;</td>
          <td class="paramname"><em>upd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds an update vector based on a remaining part of an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of the record, NULL if an error detected, which means that the record is corrupted out, own: update vector </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record, after reading the row reference NOTE that this copy of the undo log record must be preserved as long as the update vector is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">type</td><td>in: TRX_UNDO_UPD_EXIST_REC, TRX_UNDO_UPD_DEL_REC, or TRX_UNDO_DEL_MARK_REC; in the last case, only trx id and roll ptr fields are added to the update vector </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id from this undorecord </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer from this undo record </td></tr>
    <tr><td class="paramname">info_bits</td><td>in: info bits from this undo record </td></tr>
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 21 2015 19:14:27 for InnoDB Plugin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
