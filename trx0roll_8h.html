<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InnoDB Plugin: include/trx0roll.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">InnoDB Plugin
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0roll.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="univ_8i.html">univ.i</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trx0roll_8ic.html">trx0roll.ic</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for trx0roll.h:</div>
<div class="dyncontent">
<div class="center"><img src="trx0roll_8h__incl.png" border="0" usemap="#include_2trx0roll_8h" alt=""/></div>
<map name="include_2trx0roll_8h" id="include_2trx0roll_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="trx0roll_8h__dep__incl.png" border="0" usemap="#include_2trx0roll_8hdep" alt=""/></div>
<map name="include_2trx0roll_8hdep" id="include_2trx0roll_8hdep">
</map>
</div>
</div>
<p><a href="trx0roll_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrx__undo__inf__t.html">trx_undo_inf_t</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structroll__node__t.html">roll_node_t</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2f6fd6c2dbd79bf99ff5055fc68041df"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041df">roll_node_state</a> { <a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfae9f5352ceb83373d37d0d23e49c3dc86">ROLL_NODE_NONE</a> =  0, 
<a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfafd2a73d5ceb88f87a4c8a71e85a125db">ROLL_NODE_SEND</a>, 
<a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfaa7c18f3ec5eb4365811e1ea03b731ea6">ROLL_NODE_WAIT</a>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a371b0b4d385584cf0b015aa325024a0b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a371b0b4d385584cf0b015aa325024a0b">trx_is_recv</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memitem:a6994b07193b7edec487f31182487d03d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structtrx__savept__t.html">trx_savept_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a6994b07193b7edec487f31182487d03d">trx_savept_take</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memitem:ab40628101f74f78481b93bc8d69b175e"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ab40628101f74f78481b93bc8d69b175e">trx_undo_arr_free</a> (<a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *arr)</td></tr>
<tr class="memitem:ab45b6fe7d40ce3dbd674daf035cab59d"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="structtrx__undo__inf__t.html">trx_undo_inf_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ab45b6fe7d40ce3dbd674daf035cab59d">trx_undo_arr_get_nth_info</a> (<a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *arr, ulint n)</td></tr>
<tr class="memitem:a18bcf3803e0465f253734386f0e05853"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a18bcf3803e0465f253734386f0e05853">trx_roll_pop_top_rec_of_trx</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap)</td></tr>
<tr class="memitem:ab156037385d2a0067f2c4e91113a09a5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ab156037385d2a0067f2c4e91113a09a5">trx_undo_rec_reserve</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="memitem:a0c075d82bc33fc4266239fcdc0f6b5ca"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a0c075d82bc33fc4266239fcdc0f6b5ca">trx_undo_rec_release</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="memitem:a0c61b83e16d2b5d52d1fdb599206cdf5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a0c61b83e16d2b5d52d1fdb599206cdf5">trx_rollback_or_clean_recovered</a> (<a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> all)</td></tr>
<tr class="memitem:a74569485a4ce2992555e1873fce5f00a"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN os_thread_ret_t <br class="typebreak"/>
<a class="el" href="os0thread_8h.html#a973a9b61391e09b9846b41b469363aa5">DECLARE_THREAD</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a74569485a4ce2992555e1873fce5f00a">trx_rollback_or_clean_all_recovered</a> (void *arg))</td></tr>
<tr class="memitem:adbf49219b481f5ac29ff1164c770415f"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structroll__node__t.html">roll_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#adbf49219b481f5ac29ff1164c770415f">roll_node_create</a> (<a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *heap)</td></tr>
<tr class="memitem:a2418c7146c80869f19950235f425a585"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a2418c7146c80869f19950235f425a585">trx_rollback_step</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memitem:a491abb31a2f71d4819b957966d1c9d5b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a491abb31a2f71d4819b957966d1c9d5b">trx_rollback_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx))</td></tr>
<tr class="memitem:a3e12750bedfb31fef2d4a76c9da789b7"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a3e12750bedfb31fef2d4a76c9da789b7">trx_rollback_last_sql_stat_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx))</td></tr>
<tr class="memitem:a9de44999016bdbb2aa233f1f7d1b968b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a9de44999016bdbb2aa233f1f7d1b968b">trx_rollback_to_savepoint</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)))</td></tr>
<tr class="memitem:ad323238d7a3247b6b263c535458c63fb"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ad323238d7a3247b6b263c535458c63fb">trx_rollback_to_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, ib_int64_t *mysql_binlog_cache_pos))</td></tr>
<tr class="memitem:ae7bccf6810c803616d944e9c846b81c9"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ae7bccf6810c803616d944e9c846b81c9">trx_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, ib_int64_t binlog_cache_pos))</td></tr>
<tr class="memitem:a9b0d1dfc6b653f4aceb4920ef9750e64"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a9b0d1dfc6b653f4aceb4920ef9750e64">trx_release_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name))</td></tr>
<tr class="memitem:ad6b0495b710e31dd958216cd69dada42"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ad6b0495b710e31dd958216cd69dada42">trx_roll_savepoints_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *savep)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5a1eff4d854c6e5144b0f2084e5355ca"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a1eff4d854c6e5144b0f2084e5355ca"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>trx_rollback_or_clean_is_active</b></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Transaction rollback</p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a2f6fd6c2dbd79bf99ff5055fc68041df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041df">roll_node_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback node states </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a2f6fd6c2dbd79bf99ff5055fc68041dfae9f5352ceb83373d37d0d23e49c3dc86"></a>ROLL_NODE_NONE</em>&nbsp;</td><td>
<p>Unknown state </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f6fd6c2dbd79bf99ff5055fc68041dfafd2a73d5ceb88f87a4c8a71e85a125db"></a>ROLL_NODE_SEND</em>&nbsp;</td><td>
<p>about to send a rollback signal to the transaction </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f6fd6c2dbd79bf99ff5055fc68041dfaa7c18f3ec5eb4365811e1ea03b731ea6"></a>ROLL_NODE_WAIT</em>&nbsp;</td><td>
<p>rollback signal sent to the transaction, waiting for completion </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="adbf49219b481f5ac29ff1164c770415f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structroll__node__t.html">roll_node_t</a>* roll_node_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a rollback command node struct. </p>
<dl class="section return"><dt>Returns</dt><dd>own: rollback node struct in: mem heap where created </dd></dl>

</div>
</div>
<a class="anchor" id="a371b0b4d385584cf0b015aa325024a0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> trx_is_recv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines if this transaction is rolling back an incomplete transaction in crash recovery. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if trx is an incomplete transaction that is being rolled back in crash recovery in: transaction </dd></dl>

</div>
</div>
<a class="anchor" id="a9b0d1dfc6b653f4aceb4920ef9750e64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_release_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases a named savepoint. Savepoints which were set after this savepoint are deleted. </p>
<dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a18bcf3803e0465f253734386f0e05853"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec_of_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pops the topmost record when the two undo logs of a transaction are seen as a single stack of records ordered by their undo numbers. Inserts the undo number of the popped undo record to the array of currently processed undo numbers in the transaction. When the query thread finishes processing of this undo record, it must be released with trx_undo_rec_release. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit in: memory heap where copied </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">limit</td><td>in: least undo number we need </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll pointer to undo record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6b0495b710e31dd958216cd69dada42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_roll_savepoints_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees savepoint structs starting from savep. in: free all savepoints &gt; this one; if this is NULL, free all savepoints of trx </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a491abb31a2f71d4819b957966d1c9d5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback a transaction used in MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3e12750bedfb31fef2d4a76c9da789b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_last_sql_stat_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback the latest SQL statement for MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a74569485a4ce2992555e1873fce5f00a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN os_thread_ret_t <a class="el" href="os0thread_8h.html#a973a9b61391e09b9846b41b469363aa5">DECLARE_THREAD</a>() trx_rollback_or_clean_all_recovered </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. Note: this is done in a background thread. </p>
<dl class="section return"><dt>Returns</dt><dd>a dummy parameter in: a dummy parameter required by os_thread_create </dd></dl>

</div>
</div>
<a class="anchor" id="a0c61b83e16d2b5d52d1fdb599206cdf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_rollback_or_clean_recovered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a>&#160;</td>
          <td class="paramname"><em>all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </p>

</div>
</div>
<a class="anchor" id="a2418c7146c80869f19950235f425a585"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_step </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs an execution step for a rollback command node in a query graph. </p>
<dl class="section return"><dt>Returns</dt><dd>query thread to run next, or NULL in: query thread </dd></dl>

</div>
</div>
<a class="anchor" id="a9de44999016bdbb2aa233f1f7d1b968b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback a transaction to a given savepoint or do a complete rollback. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad323238d7a3247b6b263c535458c63fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t *&#160;</td>
          <td class="paramname"><em>mysql_binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rolls back a transaction back to a named savepoint. Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p>
<dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">mysql_binlog_cache_pos</td><td>out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae7bccf6810c803616d944e9c846b81c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t&#160;</td>
          <td class="paramname"><em>binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a named savepoint. If the transaction is not yet started, starts it. If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new. Savepoints are deleted in a transaction commit or rollback. </p>
<dl class="section return"><dt>Returns</dt><dd>always DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">binlog_cache_pos</td><td>in: MySQL binlog cache position corresponding to this connection at the time of the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6994b07193b7edec487f31182487d03d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> trx_savept_take </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a transaction savepoint taken at this point in time. </p>
<dl class="section return"><dt>Returns</dt><dd>savepoint in: transaction </dd></dl>

</div>
</div>
<a class="anchor" id="ab40628101f74f78481b93bc8d69b175e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_arr_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees an undo number array. in: undo number array </p>

</div>
</div>
<a class="anchor" id="ab45b6fe7d40ce3dbd674daf035cab59d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="structtrx__undo__inf__t.html">trx_undo_inf_t</a>* trx_undo_arr_get_nth_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns pointer to nth element in an undo number array. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to the nth element in: position</dd></dl>
<p>Returns pointer to nth element in an undo number array. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to the nth element </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arr</td><td>in: undo number array </td></tr>
    <tr><td class="paramname">n</td><td>in: position </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0c075d82bc33fc4266239fcdc0f6b5ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_rec_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases a reserved undo record. in: undo number </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab156037385d2a0067f2c4e91113a09a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="univ_8i.html#ab71ee9e321c01cd32b9facc463e1c8d2">ibool</a> trx_undo_rec_reserve </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reserves an undo log record for a query thread to undo. This should be called if the query thread gets the undo log record not using the pop function above. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if succeeded in: undo number of the record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 21 2015 18:11:21 for InnoDB Plugin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
